<!doctype html>
<html class="no-js" lang="">

<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Converter</title>
	<meta name="description" content="Converter">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link rel="apple-touch-icon" href="icon.png">
	<link rel="stylesheet" href="normalize.css">
	<link rel="stylesheet" href="main.css">

	<script src="rules.js"></script>
	<script src="jquery.js"></script>

	<script>
	$(function() {
		var hasClipboard = false;
		
		function convert(val, rules) {
			var output = val;
			
			for (rule in rules) {
				output = output.replace(rule.from, rule.to);
			}
			
			return output;
		}
		
		$('#zawgyi').on('change, keyup', function() {
			var output = convert($(this).val(), zg2uni);
			$('#unicode').val(output);
			if (hasClipboard) {
				navigator.clipboard.writeText(output)
			}
		});
		
		$('#unicode').on('change, keyup', function() {
			var output = convert($(this).val(), uni2zg);
			$('#zawgyi').val(output);
			if (hasClipboard) {
				navigator.clipboard.writeText(output)
			}
		});
		
		navigator.permissions.query({name:'clipboard-write'}).then(function(result) {
			hasClipboard = result.state == 'granted';
		});
	});
	</script>
</head>

<body>
	<!--div class="text-label" id="unicode-label">Unicode</div-->
	<textarea class="common-text" id="unicode"></textarea>
	
	<!--div class="text-label" id="zawgyi-label">Zawgyi</div-->
	<textarea class="common-text" id="zawgyi"></textarea>
</body>

</html>
